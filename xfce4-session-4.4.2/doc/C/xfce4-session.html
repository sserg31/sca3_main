<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Xfce 4 Session Manager</title><link rel="stylesheet" href="../xfce.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="#xfce4-session" title="Xfce 4 Session Manager"><link rel="next" href="#xfsm-intro" title="Introduction"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="xfce4-session"></a>Xfce 4 Session Manager</h1></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Benedikt</span> <span class="surname">Meurer</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a href="mailto:benny@xfce.org">benny@xfce.org</a>&gt;</code></p></div><span class="orgname">os-cillation<br></span><span class="orgdiv">System development<br></span><span class="jobtitle">Software developer<br></span></div></div></div></div><div><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="releaseinfo">
    This manual describes the <strong xmlns="" class="application"><code>xfce4-session</code></strong> package, version 4.3.
  <br></br></span></div><div><p class="copyright">Copyright © 2003, 2004, 2005 Benedikt Meurer</p></div><div><div class="legalnotice"><a name="legalnotice"></a><p>
      Permission is granted to copy, distribute and/or modify this document
      under the terms of the GNU Free Documentation License, Version 1.1 or
      any later version published by the Free Software Foundation; with no
      Invariant Sections, with no Front-Cover Texts, and with no Back-Cover
      Texts. The complete license text is available from the <a href="http://www.gnu.org/" target="_top">Free Software Foundation</a>.
    </p></div></div><div><p class="pubdate">July 2005</p></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#xfsm-intro">Introduction</a></span></dt><dt><span class="sect1"><a href="#xfce4-session-settings">Session Manager settings</a></span></dt><dd><dl><dt><span class="sect2"><a href="#xfsm-general-settings">General preferences</a></span></dt><dt><span class="sect2"><a href="#xfsm-advanced%20settings">Advanced preferences</a></span></dt></dl></dd><dt><span class="sect1"><a href="#xfsm-customize">Customizing the Session Manager</a></span></dt><dd><dl><dt><span class="sect2"><a href="#xfsm-engines">Splash screen settings</a></span></dt><dt><span class="sect2"><a href="#xfsm-shutdown">Shutdown/reboot options</a></span></dt></dl></dd><dt><span class="sect1"><a href="#xfsm-advanced">Advanced</a></span></dt><dd><dl><dt><span class="sect2"><a href="#files-and-env-vars">Files and Environment Variables</a></span></dt><dt><span class="sect2"><a href="#xfsm-kiosk-mode">Kiosk Mode</a></span></dt></dl></dd><dt><span class="sect1"><a href="#xfsm-copyright">About <strong class="application"><code>xfce4-session</code></strong></a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xfsm-intro"></a>Introduction</h2></div></div></div><p><strong class="application"><code>xfce4-session</code></strong> is a session manager for Xfce 4. Its task is to save the state of 
  your desktop (opened applications and their location) and restore it during a next 
  startup. You can create several different sessions and choose one of them on 
  startup.
  </p><p><strong class="application"><code>xfce4-session</code></strong> provides session management for both X11R6 and 
  legacy X11R5 protocols. If you don't need legacy session management 
  support, you can disable it at compile time, giving 
  --disable-legacy-sm to ./configure. Do <span class="emphasis"><em>NOT EVER</em></span> run <strong class="application"><code>smproxy</code></strong> in 
  session that is managed by <strong class="application"><code>xfce4-session</code></strong>, or weird things will happen. 
  The included legacy session management does everything that <strong class="application"><code>smproxy</code></strong>
  would do, and besides that, it also supports multiscreen display.</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xfce4-session-settings"></a>Session Manager settings</h2></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xfsm-general-settings"></a>General preferences</h3></div></div></div><div class="figure"><a name="xfsm-general-fig"></a><p class="title"><b>Figure 1. <code class="application">xfce4-session</code> general preferences</b></p><div class="screenshot"><div class="mediaobject"><img src="images/xfsm-general.png" alt="Shows the General tab of the xfce4-session settings dialog."></div></div></div><div class="variablelist"><dl><dt><span class="term">Display chooser on login</span></dt><dd><p>If set, the session manager will ask you to choose a session every 
            time you log in to Xfce.</p></dd><dt><span class="term">Automatically save session on logout</span></dt><dd><p>This option instructs the session manager to save the current 
          session automatically when you log out. If you don't select this option 
          you'll be prompted whether you want to save the current session on 
          each logout.</p></dd><dt><span class="term">Prompt on logout</span></dt><dd><p>This option disables the logout confirmation dialog. Whether 
          the session will be saved or not depends on whether you enabled the 
          automatic saving of sessions on logout or not.</p></dd></dl></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xfsm-advanced%20settings"></a>Advanced preferences</h3></div></div></div><div class="figure"><a name="xfsm-advanced-fig"></a><p class="title"><b>Figure 2. <code class="application">xfce4-session</code> advanced preferences</b></p><div class="screenshot"><div class="mediaobject"><img src="images/xfsm-advanced.png" alt="Shows Advanced tab of the xfce4-session settings dialog."></div></div></div><div class="variablelist"><dl><dt><span class="term">Launch Gnome services on startup</span></dt><dd><p>Enable this option if you need the GNOME keyring daemon to be run
          on startup. This option also instructs <strong class="application"><code>xfce4-session</code></strong> to bring up the GNOME assistive
          technologies at startup (if enabled in the GNOME control center). See the
           GNOME documentation for more information on this topic.</p></dd><dt><span class="term">Launch KDE services on startup</span></dt><dd><p>Enable this option if you plan to run KDE applications as part of 
          your Xfce Desktop session. This will notably increase the startup time, 
          but on the other hand, KDE applications will startup faster. Some KDE 
          applications may not work at all if you don't enable this option.</p></dd><dt><span class="term">Manage remote applications</span></dt><dd><p>Allow the session manager to manage applications running on 
          remote hosts. Since this option may constitute a security risk, by listening to  
          a TCP port on your system, do not enable it unless you know what you are
          doing.</p><p>System administrators may want to disable this option globally using the
          session managers <a href="#xfsm-kiosk-mode" target="_top">KIOSK
          capabilities</a>.</p></dd></dl></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xfsm-customize"></a>Customizing the Session Manager</h2></div></div></div><p>You can customize the splash-screen that <strong class="application"><code>xfce4-session</code></strong> will use when you log in to
	Xfce 4. There is a dedicated dialog available from the <span class="emphasis"><em>Xfce 4
  Settings Manager</em></span>.</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xfsm-engines"></a>Splash screen settings</h3></div></div></div><div class="figure"><a name="splash-screen-settings-fig"></a><p class="title"><b>Figure 3. Splash screen settings dialog</b></p><div class="screenshot"><div class="mediaobject"><img src="images/xfsm-splash.png" alt="Shows the xfce4-session splash screen settings dialog."></div></div></div><p>On the left, the dialog shows a list of all installed engines.
    Select an engine, and you will see, if available, a preview and
    information about it. You can click on the <span><strong class="guibutton">Test</strong></span>
    button to see a demonstration of the selected splash screen
    engine.</p><p><strong class="application"><code>xfce4-session</code></strong> provides three Splash themes engines by default. Their
    respective configuration options - if any - are available from the
    <span><strong class="guibutton">Configure</strong></span> button.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xfsm-shutdown"></a>Shutdown/reboot options</h3></div></div></div><p><strong class="application"><code>xfce4-session</code></strong> supports shutting down your computer when you log out
    of your desktop session. To be able to shutdown the computer, you
    have to be listed in the systems <code class="filename">sudoers</code> file,
    in particular, you must be allowed to execute the command
    <code class="filename">${libexecdir}/xfsm-shutdown-helper</code>
    (<code class="filename">/usr/sbin/xfsm-shutdown-helper</code> on Debian GNU/Linux)
    as user root (where <code class="filename">${libexecdir}</code> is the <code class="filename">libexec</code> sub directory in the prefix you
    installed <strong class="application"><code>xfce4-session</code></strong>, for example
    <code class="filename">/usr/local/libexec</code>).</p><p>For example, lets say, you installed <strong class="application"><code>xfce4-session</code></strong> into <code class="filename">/usr/local</code>, your hostname is <span class="emphasis"><em>myhost</em></span>
    and your user account is named <span class="emphasis"><em>myuser</em></span>, then you
    would have to add the following line to your <code class="filename">sudoers</code>
    file (remember to use <strong class="application"><code>visudo</code></strong> to edit
    that file):</p><pre class="programlisting">
myuser myhost=/usr/local/libexec/xfsm-shutdown-helper
</pre></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xfsm-advanced"></a>Advanced</h2></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="files-and-env-vars"></a>Files and Environment Variables</h3></div></div></div><p>Xfce now uses the Basedir Specification as defined on <a href="http://freedesktop.org/" target="_top">Freedesktop.org</a> to
    locate its data and configuration files. This means that file locations
    will be specified as a path relative to the directories described in
    the specification.</p><div class="variablelist"><dl><dt><span class="term">${XDG_CONFIG_HOME}</span></dt><dd><p>The first base directory to look for configuration 
          files. By default this is set to <code class="filename">~/.config/</code>.</p></dd><dt><span class="term">${XDG_CONFIG_DIRS}</span></dt><dd><p>A list of system directories that contain configuration
          data. By default the panel will look in <code class="filename">${sysconfdir}/xdg/</code> and 
          <code class="filename">/etc/xdg/</code>. The value of
          ${sysconfdir} depends on how the program was build and will often be
          <code class="filename">/etc/</code> for binary
          packages.</p></dd><dt><span class="term">${XDG_CACHE_HOME}</span></dt><dd><p>Specifies the root for all user-specific cache data. If
          this environment variable is unset, it defaults to <code class="filename">~/.cache</code>.</p></dd><dt><span class="term">${XDG_CONFIG_DIRS}/autostart/</span></dt><dd><p>This is the location where the list of applications that
          should be automatically run on login is stored. Each autostarted
          application is represented by a <code class="filename">.desktop</code>
          file (see the <a href="http://standards.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html" target="_top">Desktop
          Entry Specification</a> for details).</p><p>Prior to Xfce 4.3, the list of autostarted applications
          was stored in <code class="filename">~/Desktop/Autostart</code>,
          which contained scripts and symbolic links to applications. If
          you run <strong class="application"><code>xfce4-session</code></strong> 4.3 or above for the first time, it will
          automatically migrate the autostart items from the old location
          to the standard location and place a <code class="filename">LOCATION-CHANGED.txt</code>
          file in the old directory, that describes the location change.</p></dd><dt><span class="term">${XDG_CONFIG_DIRS}/xfce4-session/xfce4-session.rc</span></dt><dd><p>This is the location of the configuration file that
          includes the various settings for <strong class="application"><code>xfce4-session</code></strong>, which can be changed
          from the settings dialog.</p></dd><dt><span class="term">${XDG_CONFIG_DIRS}/xfce4-session/xfce4-splash.rc</span></dt><dd><p>This is the location of the configuration file that
          includes the configuration for the splash screen, which
          can be changed from the settings dialog.</p></dd><dt><span class="term">${XDG_CACHE_HOME}/sessions/</span></dt><dd><p>The directory where <strong class="application"><code>xfce4-session</code></strong> and <strong class="application"><code>xfwm4</code></strong>
          store the session data to.</p></dd><dt><span class="term">${sysconfdir}/xdg/xfce4/kiosk/kioskrc</span></dt><dd><p>Kiosk mode configuration file. See <a href="#xfsm-kiosk-mode" target="_top">next
          section</a> for an explanation.</p></dd></dl></div><p>None of the configuration files, except the <code class="filename">kioskrc</code>,
    are designed to be edited by hand during a Xfce session; in fact, the changes will
    be overwritten if you edit them while the session manager or the settings managers
    are running.</p><p>System administrators might want to customize the file
    <code class="filename">${sysconfdir}/xdg/xfce4-session/xfce4-session.rc</code> to change
    the default applications that are run on Xfce startup. For example, if you want to
    start the <strong class="application"><code>xfce4-iconbox</code></strong> instead of the 
    <strong class="application"><code>xftaskbar4</code></strong>, you would change the <span class="emphasis"><em>[Failsafe
    Session]</em></span> section like to something like this:</p><pre class="programlisting">
[Failsafe Session]
Count=4
Client0_Command=xfwm4
Client0_PerScreen=False
Client1_Command=xfce4-panel
Client1_PerScreen=True
Client2_Command=xfce4-iconbox
Client2_PerScreen=True
Client3_Command=xfdesktop
Client3_PerScreen=False
</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xfsm-kiosk-mode"></a>Kiosk Mode</h3></div></div></div><p>The session manager offers support for the Kiosk Mode, that helps to
    prevent users from making changes to their session settings. To use it you
    have to edit or create the file
    <code class="filename">${sysconfdir}/xdg/xfce4/kiosk/kioskrc</code>.</p><p>The way to explain the format of this file is by using an example. The
    xfce4-session section of your <code class="filename">kioskrc</code> might look like
    this:</p><pre class="programlisting">
[xfce4-session]
CustomizeSplash=ALL
CustomizeChooser=ALL
CustomizeLogout=ALL
CustomizeCompatibility=%wheel
Shutdown=%wheel
CustomizeSecurity=NONE
</pre><p>This allows all users to change their splash, chooser and logout settings,
    but allows only users in the group <span class="emphasis"><em>wheel</em></span> to customize the 
    compatibility settings and shutdown the system. No one will be allowed to adjust
    the security settings.</p><p>The session manager supports the following KIOSK capabilities:</p><div class="variablelist"><dl><dt><span class="term">CustomizeSplash</span></dt><dd><p>Whether or not the user is allowed to customize the splash screen.</p></dd><dt><span class="term">CustomizeChooser</span></dt><dd><p>Whether or not the user is allowed to customize the session chooser settings.</p></dd><dt><span class="term">CustomizeLogout</span></dt><dd><p>Whether or not the user is allowed to customize the logout settings.</p></dd><dt><span class="term">CustomizeCompatibility</span></dt><dd><p>Whether or not the user is allowed to customize the compatibility
          settings (KDE/Gnome compat)</p></dd><dt><span class="term">CustomizeSecurity</span></dt><dd><p>Whether or not the user is allowed to customize the security settings.
          This is one of the most <span class="emphasis"><em>IMPORTANT</em></span> settings, since it
          prevents users (actually <code class="filename">libICE</code>) from binding to a TCP port.</p></dd><dt><span class="term">Shutdown</span></dt><dd><p>Whether or not the user is allowed to shutdown (reboot or poweroff) the system.
          If a user lacks this capability the reboot and poweroff options in the shutdown
          dialog will be greyed out.</p></dd></dl></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xfsm-copyright"></a>About <strong class="application"><code>xfce4-session</code></strong></h2></div></div></div><p><strong class="application"><code>xfce4-session</code></strong> was written by Benedikt Meurer 
  (<code class="email">&lt;<a href="mailto:benny@xfce.org">benny@xfce.org</a>&gt;</code>).
    To find more information, please visit the 
    <a href="http://www.xfce.org" target="_top">Xfce web site</a>. 
  </p><p>To report a bug or make a suggestion regarding this application or
    this manual, use the bug tracking system at <a href="http://bugzilla.xfce.org/" target="_top">http://bugzilla.xfce.org/</a>. 
  </p><p>If you have questions about the use or installation of this package,
    please ask on the <a href="http://lunar-linux.org/mailman/listinfo/xfce" target="_top">xfce</a> mailing list. Development discussion takes
    place on the <a href="http://lunar-linux.org/mailman/listinfo/xfce4-dev" target="_top">xfce4-dev</a> mailing list.
  </p><p> This program is distributed under the terms of the
    GNU General Public License as published by the Free Software Foundation; 
    either version 2 of the License, or (at your option) any later version.
  </p><p>You should have received a copy of the GNU General Public License 
    along with this program; if not, write to the Free Software 
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, 
    USA.
  </p></div></div></body></html>
